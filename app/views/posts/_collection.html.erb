<% if infinite_scrolling %>
  <%= turbo_frame_tag :posts do %>
    <%= render collection: @posts, partial: 'posts/post' %>
    <% if @pagy.next %>
      <%= turbo_frame_tag :posts, loading: :lazy, src: build_posts_url(page: @pagy.next) do %>
        <div class="spinner-container">
          <i class="fas fa-circle-notch fa-spin"></i>
        </div>
      <% end %>
    <% end %>
  <% end %>
<% else %>
  <%= render collection: @posts, partial: 'posts/post' %>
  <%== pagy_nav(@pagy) %>
<% end %>
